<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hourly Forecast - Trail Weather</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Manrope:wght@400;600;700;800&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* Light theme */
      --bg-primary: #fafaf9;
      --bg-secondary: #ffffff;
      --bg-tertiary: #f5f5f4;
      --bg-card: #ffffff;
      --bg-card-hover: #fafaf9;
      --text-primary: #1c1917;
      --text-secondary: #57534e;
      --text-tertiary: #78716c;
      --border-color: #e7e5e4;
      --accent-primary: #2563eb;
      --accent-secondary: #3b82f6;
      --warning: #f59e0b;
      --danger: #ef4444;
      --success: #10b981;
      --precip-bg: rgba(37, 99, 235, 0.1);
      --precip-color: #2563eb;
      --shadow: rgba(0, 0, 0, 0.05);
      --topo-line: rgba(120, 113, 108, 0.15);
      --gradient-start: rgba(250, 250, 249, 0.8);
      --gradient-end: rgba(250, 250, 249, 0);
    }

    [data-theme="dark"] {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #1e293b;
      --bg-card: #1e293b;
      --bg-card-hover: #334155;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-tertiary: #94a3b8;
      --border-color: #334155;
      --accent-primary: #3b82f6;
      --accent-secondary: #60a5fa;
      --warning: #fbbf24;
      --danger: #f87171;
      --success: #34d399;
      --precip-bg: rgba(59, 130, 246, 0.15);
      --precip-color: #60a5fa;
      --shadow: rgba(0, 0, 0, 0.3);
      --topo-line: rgba(203, 213, 225, 0.1);
      --gradient-start: rgba(15, 23, 42, 0.9);
      --gradient-end: rgba(15, 23, 42, 0);
    }

    body {
      font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Topographic background pattern */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        repeating-linear-gradient(0deg, var(--topo-line) 0px, transparent 1px, transparent 40px),
        repeating-linear-gradient(90deg, var(--topo-line) 0px, transparent 1px, transparent 40px);
      pointer-events: none;
      opacity: 0.5;
      z-index: 0;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      position: relative;
      z-index: 1;
    }

    /* Header */
    .header {
      margin-bottom: 2rem;
      animation: slideDown 0.6s ease-out;
    }

    .location {
      font-family: 'DM Mono', monospace;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--text-tertiary);
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .date-title {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      letter-spacing: -0.02em;
    }

    .conditions-summary {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 1.125rem;
      color: var(--text-secondary);
      margin-bottom: 1.5rem;
    }

    .conditions-icon {
      font-size: 2rem;
    }

    .day-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1rem;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .stat-label {
      font-family: 'DM Mono', monospace;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-tertiary);
      margin-bottom: 0.25rem;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .stat-subvalue {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    /* Theme toggle */
    .theme-toggle {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 100;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.25rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px var(--shadow);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
      background: var(--bg-card-hover);
    }

    /* Hourly Timeline */
    .timeline-section {
      margin-bottom: 3rem;
    }

    .section-title {
      font-family: 'DM Mono', monospace;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--text-tertiary);
      margin-bottom: 1.5rem;
      font-weight: 500;
    }

    .hourly-timeline {
      position: relative;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 2rem;
      overflow-x: auto;
      box-shadow: 0 4px 16px var(--shadow);
    }

    .timeline-grid {
      display: grid;
      grid-template-columns: repeat(24, 1fr);
      gap: 0.5rem;
      min-width: 1200px;
      position: relative;
    }

    /* Sunrise/Sunset overlay */
    .daylight-overlay {
      position: absolute;
      top: 0;
      height: 100%;
      background: linear-gradient(
        to bottom,
        rgba(251, 191, 36, 0.05),
        rgba(251, 191, 36, 0.02)
      );
      border-left: 2px solid var(--warning);
      border-right: 2px solid var(--warning);
      pointer-events: none;
      z-index: 1;
    }

    .daylight-label {
      position: absolute;
      top: -1.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'DM Mono', monospace;
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--warning);
      white-space: nowrap;
      font-weight: 500;
    }

    .hour-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1rem 0.75rem;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      z-index: 2;
      animation: fadeInUp 0.5s ease-out backwards;
    }

    .hour-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-4px);
      box-shadow: 0 8px 24px var(--shadow);
      border-color: var(--accent-primary);
    }

    .hour-time {
      font-family: 'DM Mono', monospace;
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--text-tertiary);
      margin-bottom: 0.75rem;
      text-align: center;
    }

    .hour-icon {
      font-size: 2rem;
      text-align: center;
      margin-bottom: 0.75rem;
      filter: drop-shadow(0 2px 4px var(--shadow));
    }

    .hour-temp {
      font-size: 1.25rem;
      font-weight: 700;
      text-align: center;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .hour-feels {
      font-size: 0.7rem;
      text-align: center;
      color: var(--text-tertiary);
      margin-bottom: 0.75rem;
    }

    .hour-metrics {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      border-top: 1px solid var(--border-color);
      padding-top: 0.75rem;
    }

    .metric {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.7rem;
    }

    .metric-label {
      color: var(--text-tertiary);
      font-family: 'DM Mono', monospace;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .metric-value {
      color: var(--text-secondary);
      font-weight: 600;
    }

    .metric-value.warning {
      color: var(--warning);
    }

    .metric-value.danger {
      color: var(--danger);
    }

    .precip-indicator {
      background: var(--precip-bg);
      color: var(--precip-color);
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.7rem;
      text-align: center;
      margin-top: 0.5rem;
    }

    /* Detailed metrics section */
    .detailed-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }

    .metric-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
    }

    .metric-card:hover {
      background: var(--bg-card-hover);
      box-shadow: 0 4px 16px var(--shadow);
    }

    .metric-card-title {
      font-family: 'DM Mono', monospace;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-tertiary);
      margin-bottom: 1rem;
    }

    .metric-chart {
      display: flex;
      align-items: flex-end;
      gap: 2px;
      height: 80px;
      margin-bottom: 1rem;
    }

    .chart-bar {
      flex: 1;
      background: var(--accent-primary);
      border-radius: 2px 2px 0 0;
      transition: all 0.3s ease;
      position: relative;
      opacity: 0.6;
    }

    .chart-bar:hover {
      opacity: 1;
      transform: scaleY(1.05);
    }

    .metric-summary {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .metric-range {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .metric-average {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    /* Best hiking window */
    .hiking-window {
      background: linear-gradient(135deg, var(--success) 0%, var(--accent-primary) 100%);
      border-radius: 16px;
      padding: 2rem;
      margin-top: 2rem;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .hiking-window::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><path d="M0 20 L20 0 L40 20 L20 40 Z" fill="rgba(255,255,255,0.05)"/></svg>');
      opacity: 0.3;
    }

    .hiking-window-content {
      position: relative;
      z-index: 1;
    }

    .hiking-window-title {
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.5rem;
      opacity: 0.9;
      font-family: 'DM Mono', monospace;
    }

    .hiking-window-time {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
    }

    .hiking-window-reason {
      font-size: 0.875rem;
      opacity: 0.9;
    }

    /* Animations */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Set staggered animation delays */
    .hour-card:nth-child(1) { animation-delay: 0.05s; }
    .hour-card:nth-child(2) { animation-delay: 0.1s; }
    .hour-card:nth-child(3) { animation-delay: 0.15s; }
    .hour-card:nth-child(4) { animation-delay: 0.2s; }
    .hour-card:nth-child(5) { animation-delay: 0.25s; }
    .hour-card:nth-child(6) { animation-delay: 0.3s; }
    .hour-card:nth-child(7) { animation-delay: 0.35s; }
    .hour-card:nth-child(8) { animation-delay: 0.4s; }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .date-title {
        font-size: 1.75rem;
      }

      .day-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .hourly-timeline {
        padding: 1rem;
      }

      .timeline-grid {
        gap: 0.25rem;
        min-width: 800px;
      }

      .hour-card {
        padding: 0.75rem 0.5rem;
      }

      .detailed-metrics {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" id="themeToggle">
    <span id="themeIcon">üåô</span>
  </button>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="location" id="location">San Juan Islands</div>
      <h1 class="date-title" id="dateTitle">Tuesday, January 13</h1>
      <div class="conditions-summary">
        <span class="conditions-icon">üåßÔ∏è</span>
        <span id="conditions">Partly Cloudy</span>
      </div>
    </header>

    <!-- Day Statistics -->
    <div class="day-stats">
      <div class="stat-card">
        <div class="stat-label">Temperature</div>
        <div class="stat-value" id="tempRange">39¬∞ - 52¬∞</div>
        <div class="stat-subvalue" id="avgTemp">Avg 48¬∞</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Precipitation</div>
        <div class="stat-value" id="precipTotal">0.35"</div>
        <div class="stat-subvalue" id="precipProb">100% chance</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Wind</div>
        <div class="stat-value" id="windSpeed">23 mph</div>
        <div class="stat-subvalue" id="windGust">Gusts to 40 mph</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Visibility</div>
        <div class="stat-value" id="visibility">8.4 mi</div>
        <div class="stat-subvalue" id="cloudCover">100% clouds</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Daylight</div>
        <div class="stat-value" id="daylight">8h 37m</div>
        <div class="stat-subvalue" id="sunriseSunset">8:00 AM - 4:37 PM</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">UV Index</div>
        <div class="stat-value" id="uvIndex">1</div>
        <div class="stat-subvalue">Low</div>
      </div>
    </div>

    <!-- Best Hiking Window -->
    <div class="hiking-window" id="hikingWindow">
      <div class="hiking-window-content">
        <div class="hiking-window-title">‚òÄÔ∏è Optimal Hiking Window</div>
        <div class="hiking-window-time" id="bestWindow">9:00 AM - 3:00 PM</div>
        <div class="hiking-window-reason" id="windowReason">
          Lowest precipitation probability (2-8%), moderate winds, and full daylight. 
          Start early to maximize good conditions.
        </div>
      </div>
    </div>

    <!-- Hourly Timeline -->
    <section class="timeline-section">
      <h2 class="section-title">24-Hour Detailed Forecast</h2>
      <div class="hourly-timeline">
        <div class="timeline-grid" id="timelineGrid">
          <!-- Hours will be inserted here -->
        </div>
      </div>
    </section>

    <!-- Detailed Metrics -->
    <div class="detailed-metrics">
      <div class="metric-card">
        <div class="metric-card-title">Temperature Trend</div>
        <div class="metric-chart" id="tempChart"></div>
        <div class="metric-summary">
          <span class="metric-range">Range: <span id="tempChartRange">39¬∞ - 52¬∞</span></span>
          <span class="metric-average" id="tempChartAvg">48¬∞</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-card-title">Wind Speed</div>
        <div class="metric-chart" id="windChart"></div>
        <div class="metric-summary">
          <span class="metric-range">Max: <span id="windChartMax">40 mph</span></span>
          <span class="metric-average" id="windChartAvg">23 mph</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-card-title">Precipitation Probability</div>
        <div class="metric-chart" id="precipChart"></div>
        <div class="metric-summary">
          <span class="metric-range">Total: <span id="precipChartTotal">0.35"</span></span>
          <span class="metric-average" id="precipChartAvg">71%</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-card-title">Visibility</div>
        <div class="metric-chart" id="visibilityChart"></div>
        <div class="metric-summary">
          <span class="metric-range">Range: <span id="visibilityChartRange">5.3 - 10 mi</span></span>
          <span class="metric-average" id="visibilityChartAvg">8.4 mi</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Sample data - replace with your actual data
    const weatherData = {
      location: {
        name: "San Juan Islands",
        description: "San Juan"
      },
      day: {
        datetime: "2026-01-13",
        tempmax: 52.1,
        tempmin: 44.9,
        temp: 48.6,
        conditions: "Rain, Overcast",
        precip: 0.349,
        precipprob: 100,
        windspeed: 23.2,
        windgust: 39.9,
        visibility: 8.4,
        cloudcover: 99.7,
        uvindex: 1,
        sunrise: "08:00:11",
        sunset: "16:37:37"
      },
      hours: [
        { datetime: "00:00:00", temp: 46, feelslike: 38.5, precip: 0.044, precipprob: 100, windspeed: 19.3, windgust: 27, visibility: 5.3, humidity: 88.39, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "01:00:00", temp: 45.5, feelslike: 39.2, precip: 0.025, precipprob: 100, windspeed: 13.9, windgust: 33.3, visibility: 8.3, humidity: 88.8, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "02:00:00", temp: 45, feelslike: 39.5, precip: 0.02, precipprob: 90, windspeed: 12.5, windgust: 30, visibility: 7.8, humidity: 87, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "03:00:00", temp: 44.5, feelslike: 39, precip: 0.015, precipprob: 85, windspeed: 11.2, windgust: 28, visibility: 8.1, humidity: 86, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "04:00:00", temp: 44, feelslike: 38.8, precip: 0.01, precipprob: 75, windspeed: 10.8, windgust: 26, visibility: 8.5, humidity: 85, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "05:00:00", temp: 43.5, feelslike: 38.5, precip: 0.008, precipprob: 65, windspeed: 10.2, windgust: 24, visibility: 8.8, humidity: 84, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "06:00:00", temp: 43, feelslike: 38.2, precip: 0.005, precipprob: 50, windspeed: 9.8, windgust: 22, visibility: 9.1, humidity: 83, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "07:00:00", temp: 42.5, feelslike: 37.8, precip: 0.003, precipprob: 40, windspeed: 9.5, windgust: 21, visibility: 9.3, humidity: 82, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "08:00:00", temp: 42, feelslike: 37.5, precip: 0, precipprob: 20, windspeed: 9.2, windgust: 20, visibility: 9.5, humidity: 81, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "09:00:00", temp: 43, feelslike: 38.5, precip: 0, precipprob: 15, windspeed: 8.8, windgust: 18, visibility: 9.8, humidity: 78, uvindex: 1, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "10:00:00", temp: 45, feelslike: 40.5, precip: 0, precipprob: 10, windspeed: 8.2, windgust: 17, visibility: 10, humidity: 75, uvindex: 1, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "11:00:00", temp: 47, feelslike: 42.5, precip: 0, precipprob: 8, windspeed: 7.8, windgust: 16, visibility: 10, humidity: 72, uvindex: 1, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "12:00:00", temp: 49, feelslike: 44.5, precip: 0, precipprob: 5, windspeed: 7.5, windgust: 15, visibility: 10, humidity: 68, uvindex: 1, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "13:00:00", temp: 50.5, feelslike: 46, precip: 0, precipprob: 5, windspeed: 7.2, windgust: 14, visibility: 10, humidity: 65, uvindex: 1, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "14:00:00", temp: 51.5, feelslike: 47, precip: 0, precipprob: 8, windspeed: 7.5, windgust: 15, visibility: 9.8, humidity: 64, uvindex: 0, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "15:00:00", temp: 52, feelslike: 47.5, precip: 0.005, precipprob: 12, windspeed: 8.2, windgust: 16, visibility: 9.5, humidity: 66, uvindex: 0, icon: "partly-cloudy-day", conditions: "Partly Cloudy" },
        { datetime: "16:00:00", temp: 51.5, feelslike: 47, precip: 0.01, precipprob: 18, windspeed: 9.1, windgust: 18, visibility: 9.2, humidity: 68, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "17:00:00", temp: 50.5, feelslike: 46, precip: 0.015, precipprob: 25, windspeed: 10.2, windgust: 20, visibility: 8.8, humidity: 72, uvindex: 0, icon: "cloudy", conditions: "Overcast" },
        { datetime: "18:00:00", temp: 49.5, feelslike: 45, precip: 0.02, precipprob: 35, windspeed: 11.5, windgust: 22, visibility: 8.5, humidity: 75, uvindex: 0, icon: "rain", conditions: "Light Rain" },
        { datetime: "19:00:00", temp: 48.5, feelslike: 43.5, precip: 0.025, precipprob: 45, windspeed: 12.8, windgust: 24, visibility: 8.1, humidity: 78, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "20:00:00", temp: 47.5, feelslike: 42.5, precip: 0.03, precipprob: 55, windspeed: 14.2, windgust: 26, visibility: 7.8, humidity: 81, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "21:00:00", temp: 47, feelslike: 42, precip: 0.035, precipprob: 65, windspeed: 15.5, windgust: 28, visibility: 7.5, humidity: 83, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "22:00:00", temp: 46.5, feelslike: 41.5, precip: 0.038, precipprob: 75, windspeed: 16.8, windgust: 30, visibility: 7.2, humidity: 85, uvindex: 0, icon: "rain", conditions: "Rain" },
        { datetime: "23:00:00", temp: 46, feelslike: 41, precip: 0.04, precipprob: 85, windspeed: 18.2, windgust: 32, visibility: 6.8, humidity: 87, uvindex: 0, icon: "rain", conditions: "Rain" }
      ]
    };

    // Weather icons mapping
    const iconMap = {
      'rain': 'üåßÔ∏è',
      'cloudy': '‚òÅÔ∏è',
      'partly-cloudy-day': '‚õÖ',
      'partly-cloudy-night': 'üåô',
      'clear-day': '‚òÄÔ∏è',
      'clear-night': 'üåô',
      'snow': '‚ùÑÔ∏è',
      'fog': 'üå´Ô∏è',
      'wind': 'üí®'
    };

    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    let isDark = false;

    // Check for saved theme preference or default to light
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      isDark = true;
      document.body.setAttribute('data-theme', 'dark');
      themeIcon.textContent = '‚òÄÔ∏è';
    }

    themeToggle.addEventListener('click', () => {
      isDark = !isDark;
      if (isDark) {
        document.body.setAttribute('data-theme', 'dark');
        themeIcon.textContent = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'dark');
      } else {
        document.body.removeAttribute('data-theme');
        themeIcon.textContent = 'üåô';
        localStorage.setItem('theme', 'light');
      }
    });

    // Populate data
    function formatTime(datetime) {
      const hour = parseInt(datetime.split(':')[0]);
      if (hour === 0) return '12 AM';
      if (hour < 12) return `${hour} AM`;
      if (hour === 12) return '12 PM';
      return `${hour - 12} PM`;
    }

    function getWindWarning(speed, gust) {
      if (gust > 30 || speed > 20) return 'danger';
      if (gust > 20 || speed > 15) return 'warning';
      return '';
    }

    function renderHourlyForecast() {
      const grid = document.getElementById('timelineGrid');
      const sunrise = 8; // 8 AM
      const sunset = 16.5; // 4:37 PM
      
      // Add daylight overlay
      const daylightOverlay = document.createElement('div');
      daylightOverlay.className = 'daylight-overlay';
      daylightOverlay.style.left = `${(sunrise / 24) * 100}%`;
      daylightOverlay.style.width = `${((sunset - sunrise) / 24) * 100}%`;
      daylightOverlay.innerHTML = '<div class="daylight-label">‚òÄÔ∏è Daylight Hours</div>';
      grid.appendChild(daylightOverlay);

      weatherData.hours.forEach((hour, index) => {
        const hourNum = parseInt(hour.datetime.split(':')[0]);
        const card = document.createElement('div');
        card.className = 'hour-card';
        
        const windWarning = getWindWarning(hour.windspeed, hour.windgust);
        
        card.innerHTML = `
          <div class="hour-time">${formatTime(hour.datetime)}</div>
          <div class="hour-icon">${iconMap[hour.icon] || '‚òÅÔ∏è'}</div>
          <div class="hour-temp">${Math.round(hour.temp)}¬∞</div>
          <div class="hour-feels">Feels ${Math.round(hour.feelslike)}¬∞</div>
          <div class="hour-metrics">
            <div class="metric">
              <span class="metric-label">Wind</span>
              <span class="metric-value ${windWarning}">${Math.round(hour.windspeed)} mph</span>
            </div>
            <div class="metric">
              <span class="metric-label">Gust</span>
              <span class="metric-value ${windWarning}">${Math.round(hour.windgust)} mph</span>
            </div>
            <div class="metric">
              <span class="metric-label">Vis</span>
              <span class="metric-value">${hour.visibility} mi</span>
            </div>
            <div class="metric">
              <span class="metric-label">Humid</span>
              <span class="metric-value">${Math.round(hour.humidity)}%</span>
            </div>
          </div>
          ${hour.precipprob > 0 ? `<div class="precip-indicator">${hour.precipprob}% ‚Ä¢ ${hour.precip.toFixed(2)}"</div>` : ''}
        `;
        
        grid.appendChild(card);
      });
    }

    function renderCharts() {
      // Temperature chart
      const tempChart = document.getElementById('tempChart');
      const temps = weatherData.hours.map(h => h.temp);
      const maxTemp = Math.max(...temps);
      const minTemp = Math.min(...temps);
      const tempRange = maxTemp - minTemp;
      
      temps.forEach(temp => {
        const bar = document.createElement('div');
        bar.className = 'chart-bar';
        const height = ((temp - minTemp) / tempRange) * 100;
        bar.style.height = `${height}%`;
        tempChart.appendChild(bar);
      });

      // Wind chart
      const windChart = document.getElementById('windChart');
      const winds = weatherData.hours.map(h => h.windgust);
      const maxWind = Math.max(...winds);
      
      winds.forEach(wind => {
        const bar = document.createElement('div');
        bar.className = 'chart-bar';
        bar.style.height = `${(wind / maxWind) * 100}%`;
        windChart.appendChild(bar);
      });

      // Precipitation chart
      const precipChart = document.getElementById('precipChart');
      const precips = weatherData.hours.map(h => h.precipprob);
      
      precips.forEach(precip => {
        const bar = document.createElement('div');
        bar.className = 'chart-bar';
        bar.style.height = `${precip}%`;
        precipChart.appendChild(bar);
      });

      // Visibility chart
      const visibilityChart = document.getElementById('visibilityChart');
      const visibilities = weatherData.hours.map(h => h.visibility);
      const maxVis = Math.max(...visibilities);
      
      visibilities.forEach(vis => {
        const bar = document.createElement('div');
        bar.className = 'chart-bar';
        bar.style.height = `${(vis / maxVis) * 100}%`;
        visibilityChart.appendChild(bar);
      });
    }

    // Initialize
    renderHourlyForecast();
    renderCharts();
  </script>
</body>
</html>